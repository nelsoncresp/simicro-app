<div class="min-h-screen bg-gradient-to-br from-slate-50 to-blue-50/30 px-6 py-10 font-sans">

  <!-- ========================================================
       SECCI√ìN DE BIENVENIDA ‚Äì c√°lido, premium y humano
  ======================================================== -->
  <section class="mb-12">
    <div class="bg-white/70 backdrop-blur-md border border-white shadow-lg rounded-3xl p-8 flex items-center gap-6">

      <div class="w-16 h-16 rounded-2xl bg-gradient-to-br from-sky-500 to-blue-600 flex items-center justify-center shadow-md">
        <i class="bi bi-person-hearts text-white text-3xl"></i>
      </div>

      <div>
        <h1 class="text-3xl font-extrabold text-blue-900">
          ¬°Qu√© gusto verte nuevamente, {{ currentUser()?.nombre }}! üëã
        </h1>

        <p class="text-blue-700 text-sm mt-2 max-w-xl leading-relaxed">
          Gracias por tu dedicaci√≥n analizando solicitudes y apoyando a emprendedores que generan oportunidades.
          Esperamos que tengas un d√≠a productivo. üíô
        </p>
      </div>

    </div>
  </section>

  <!-- ========================================================
       RESUMEN GENERAL ‚Äì tarjetas premium
  ======================================================== -->
  <section class="mb-16">

    <h2 class="text-xl font-bold text-gray-800 mb-5 flex items-center gap-2">
      <i class="bi bi-graph-up text-indigo-600"></i>
      Resumen general
    </h2>

    <div *ngIf="!dashboard" class="text-center py-8 text-gray-500">
      <div class="w-10 h-10 border-4 border-blue-200 border-t-blue-500 rounded-full animate-spin mx-auto mb-3"></div>
      Cargando dashboard...
    </div>

    <div *ngIf="dashboard"
         class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">

      <!-- CARD -->
      <div class="p-6 bg-white rounded-2xl shadow-md border border-slate-200 hover:shadow-lg transition">
        <div class="flex items-center gap-3 mb-3">
          <div class="w-10 h-10 bg-sky-100 rounded-xl flex items-center justify-center">
            <i class="bi bi-people-fill text-sky-600"></i>
          </div>
          <p class="font-medium text-gray-600">Usuarios Registrados</p>
        </div>
        <h3 class="text-3xl font-extrabold text-sky-700">{{ dashboard.totalUsuarios }}</h3>
      </div>

      <div class="p-6 bg-white rounded-2xl shadow-md border border-slate-200 hover:shadow-lg transition">
        <div class="flex items-center gap-3 mb-3">
          <div class="w-10 h-10 bg-emerald-100 rounded-xl flex items-center justify-center">
            <i class="bi bi-person-check text-emerald-600"></i>
          </div>
          <p class="font-medium text-gray-600">Usuarios Activos</p>
        </div>
        <h3 class="text-3xl font-extrabold text-emerald-600">{{ dashboard.usuariosActivos }}</h3>
      </div>

      <div class="p-6 bg-white rounded-2xl shadow-md border border-slate-200 hover:shadow-lg transition">
        <div class="flex items-center gap-3 mb-3">
          <div class="w-10 h-10 bg-indigo-100 rounded-xl flex items-center justify-center">
            <i class="bi bi-credit-card text-indigo-600"></i>
          </div>
          <p class="font-medium text-gray-600">Cr√©ditos Totales</p>
        </div>
        <h3 class="text-3xl font-extrabold text-indigo-600">{{ dashboard.totalCreditos }}</h3>
      </div>

      <div class="p-6 bg-white rounded-2xl shadow-md border border-slate-200 hover:shadow-lg transition">
        <div class="flex items-center gap-3 mb-3">
          <div class="w-10 h-10 bg-purple-100 rounded-xl flex items-center justify-center">
            <i class="bi bi-bank2 text-purple-600"></i>
          </div>
          <p class="font-medium text-gray-600">Cr√©ditos Activos</p>
        </div>
        <h3 class="text-3xl font-extrabold text-purple-600">{{ dashboard.creditosActivos }}</h3>
      </div>

    </div>

  </section>

  

  <!-- DIVIDER PREMIUM ENTRE DASHBOARD Y SOLICITUDES -->
<div class="relative flex items-center justify-center my-12">
  
  <!-- L√çNEAS A LOS LADOS -->
  <div class="w-full h-px bg-gradient-to-r from-transparent via-slate-300 to-transparent"></div>

  <!-- ICONO CENTRAL -->
  <div class="absolute bg-white px-6 py-2 rounded-full shadow-md border border-slate-200
              flex items-center gap-2 text-slate-600 text-sm font-medium">

    <i class="bi bi-layers-half text-indigo-600"></i>
    Gestion de solicitudes
  </div>

</div>


  <!-- ========================================================
       SOLICITUDES ‚Äì Secci√≥n premium y armoniosa
  ======================================================== -->
  <section class="mb-10">

    <!-- TABS + BUSCADOR -->
    <section class="bg-white/80 backdrop-blur-sm rounded-2xl shadow-sm border border-white p-6 mb-8">
      <div class="flex flex-col lg:flex-row justify-between items-start lg:items-center gap-5">

        <!-- TABS -->
        <div  class="flex gap-2 overflow-x-auto pb-2" id="solicitudes-section">
          <button
            (click)="tab='pendientes'"
            class="px-5 py-3 rounded-xl text-sm font-medium transition-all duration-300 flex items-center gap-2"
            [ngClass]="tab==='pendientes'
              ? 'bg-gradient-to-r from-indigo-500 to-indigo-600 text-white shadow-lg shadow-indigo-200'
              : 'bg-white text-gray-600 hover:bg-gray-50 border border-gray-200 hover:border-gray-300'">
            <i class="bi bi-clock-history"></i>
            Pendientes
            <span class="bg-white/20 px-2 py-0.5 rounded-full text-xs">{{ pendientesCount }}</span>
          </button>

          <button
            (click)="tab='aprobadas'"
            class="px-5 py-3 rounded-xl text-sm font-medium transition-all duration-300 flex items-center gap-2"
            [ngClass]="tab==='aprobadas'
              ? 'bg-gradient-to-r from-emerald-500 to-teal-600 text-white shadow-lg shadow-emerald-200'
              : 'bg-white text-gray-600 hover:bg-gray-50 border border-gray-200 hover:border-gray-300'">
            <i class="bi bi-check-circle"></i>
            Aprobadas
            <span class="bg-white/20 px-2 py-0.5 rounded-full text-xs">{{ aprobadasCount }}</span>
          </button>
        </div>

        <!-- BUSCADOR -->
        <div class="relative w-full lg:max-w-xs">
          <i class="bi bi-search absolute left-4 top-1/2 -translate-y-1/2 text-gray-400"></i>
          <input
            [(ngModel)]="search"
            (input)="filtrar()"
            class="w-full pl-11 pr-4 py-3 bg-white/80 backdrop-blur-sm rounded-xl border border-gray-200 text-sm
                   focus:ring-2 focus:ring-indigo-400 focus:border-indigo-400 transition-all shadow-sm"
            placeholder="Buscar por nombre, ID, emprendedor..."
          />
        </div>

      </div>
    </section>

    <!-- =============================
         LISTA DE SOLICITUDES PREMIUM
    ============================== -->
    <section class="space-y-4">

      <!-- VAC√çO -->
      <div *ngIf="filtered.length === 0"
           class="bg-white/80 backdrop-blur-sm border border-white rounded-2xl p-12 text-center shadow-sm">
        <div class="w-20 h-20 rounded-full bg-gradient-to-br from-gray-100 to-gray-200 flex items-center justify-center mx-auto mb-4">
          <i class="bi bi-inbox text-3xl text-gray-400"></i>
        </div>
        <h3 class="text-lg font-medium text-gray-700 mb-2">No se encontraron registros</h3>
        <p class="text-gray-500 text-sm max-w-md mx-auto">Intenta buscar por ID, nombre o emprendedor.</p>
      </div>

      <!-- TARJETAS -->
      <ng-container *ngFor="let s of paginatedList">


        <!-- PENDIENTES -->
        <!-- PENDIENTES -->
<div *ngIf="tab==='pendientes' && isPendiente(s)"
     class="bg-white/80 backdrop-blur-sm border border-white rounded-2xl shadow-md hover:shadow-lg p-5
            flex flex-col md:flex-row justify-between items-start md:items-center gap-4 transition duration-300">

  <div class="flex items-start gap-4">

    <!-- √çcono -->
    <div class="w-12 h-12 rounded-xl bg-indigo-100 flex items-center justify-center">
      <i class="bi bi-hourglass-split text-indigo-700 text-lg"></i>
    </div>

    <!-- Informaci√≥n -->
    <div>
      <h3 class="text-lg font-semibold text-gray-900">{{ s.nombre_negocio }}</h3>

      <!-- Etiquetas -->
      <div class="flex items-center gap-2 mt-1 text-xs font-medium text-gray-700">
        <span class="px-2 py-0.5 bg-indigo-50 text-indigo-700 rounded-lg">ID: {{ s.id_solicitud }}</span>
        <span class="px-2 py-0.5 bg-yellow-50 text-yellow-700 rounded-lg">Pendiente</span>
      </div>

      <!-- Info -->
      <p class="text-gray-700 text-sm mt-2 flex items-center gap-2">
        <i class="bi bi-person text-gray-400"></i> {{ s.nombre_emprendedor }}
      </p>

      <p class="text-gray-700 text-sm flex items-center gap-2">
        <i class="bi bi-currency-dollar text-gray-400"></i>
        <span class="font-semibold">{{ s.monto_solicitado | currency:'COP' }}</span>
      </p>

      <p class="text-gray-500 text-xs mt-1" *ngIf="s.fecha_creacion">
        <i class="bi bi-calendar"></i> Registrada el: {{ s.fecha_creacion | date:'mediumDate' }}
      </p>
    </div>

  </div>

  <!-- Bot√≥n -->
  <button
    (click)="verDetalle(s)"
    class="px-5 py-2.5 rounded-xl bg-white border border-indigo-200 text-indigo-600 text-sm font-medium
           hover:bg-indigo-50 hover:border-indigo-300 shadow-sm">
    Revisar solicitud
  </button>
</div>


        <!-- APROBADAS -->
       <!-- APROBADAS -->
<div *ngIf="tab==='aprobadas' && isAprobada(s)"
     class="bg-white/80 backdrop-blur-sm border border-emerald-200 rounded-2xl shadow-md hover:shadow-lg p-5
            flex flex-col md:flex-row justify-between items-start md:items-center gap-4 transition">

  <div class="flex items-start gap-4">

    <div class="w-12 h-12 rounded-xl bg-emerald-100 flex items-center justify-center">
      <i class="bi bi-check-circle text-emerald-700 text-xl"></i>
    </div>

    <div>
      <h3 class="text-lg font-semibold text-gray-900">{{ s.nombre_negocio }}</h3>

      <div class="flex items-center gap-2 mt-1 text-xs font-medium">
        <span class="px-2 py-0.5 bg-emerald-50 text-emerald-700 rounded-lg">ID: {{ s.id_solicitud }}</span>
        <span class="px-2 py-0.5 bg-emerald-600/10 text-emerald-700 rounded-lg">Aprobada</span>
      </div>

      <p class="text-gray-700 text-sm mt-2 flex items-center gap-2">
        <i class="bi bi-currency-dollar text-gray-400"></i>
        <span class="font-semibold">{{ s.monto_solicitado | currency:'COP' }}</span>
      </p>

      <p class="text-gray-500 text-xs mt-1" *ngIf="s.fecha_aprobacion">
        <i class="bi bi-calendar-check"></i> Aprobada el: {{ s.fecha_aprobacion | date:'mediumDate' }}
      </p>

    </div>
  </div>

  <button
    (click)="verDetalle(s)"
    class="px-5 py-2.5 rounded-xl bg-white border border-indigo-200 text-indigo-600 text-sm font-medium hover:bg-indigo-50">
    Ver detalles
  </button>
</div>


      </ng-container>
    </section>

  </section>



  <!-- ========================================================
       MODAL DE DETALLES ‚Äì PREMIUM COMPLETO
  ======================================================== -->
  <div *ngIf="showModal"
       class="fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50 p-4">

    <div class="bg-white w-full max-w-3xl rounded-2xl shadow-2xl overflow-hidden animate-fadeInUp">

      <!-- HEADER -->
      <div class="px-6 py-5 border-b bg-gradient-to-r from-blue-600 to-indigo-600 text-white flex justify-between items-center">
        <div class="flex items-center gap-3">
          <div class="w-10 h-10 bg-white/20 rounded-xl flex justify-center items-center">
            <i class="bi bi-shop text-white text-lg"></i>
          </div>

          <div>
            <h3 class="text-lg font-semibold">Detalles del Emprendimiento</h3>
            <p class="text-xs text-blue-100">Informaci√≥n clave para evaluar la solicitud</p>
          </div>
        </div>

        <button (click)="cerrarModal()"
          class="w-10 h-10 bg-white/20 rounded-xl flex justify-center items-center hover:bg-white/30 transition">
          <i class="bi bi-x-lg text-white text-sm"></i>
        </button>
      </div>

      <!-- BODY -->
      <div class="p-6 max-h-[75vh] overflow-y-auto">

        <!-- CARGANDO -->
        <div *ngIf="!detalle" class="text-center py-10 text-gray-500">
          <div class="w-14 h-14 border-4 border-indigo-200 border-t-indigo-600 rounded-full animate-spin mx-auto mb-4"></div>
          Cargando informaci√≥n...
        </div>

        <!-- INFO COMPLETA -->
        <div *ngIf="detalle" class="space-y-8">

          <!-- ================== INFO NEGOCIO ================== -->
          <div class="bg-gray-50 p-5 rounded-xl border shadow-sm">
            <h4 class="text-lg font-semibold text-gray-800 mb-3 flex items-center gap-2">
              <i class="bi bi-shop text-indigo-600"></i>
              Informaci√≥n del Negocio
            </h4>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">

              <div>
                <p class="text-xs text-gray-500 font-medium">Nombre del emprendimiento</p>
                <p class="font-semibold">{{ detalle.nombre_emprendimiento }}</p>
              </div>

              <div>
                <p class="text-xs text-gray-500 font-medium">Sector econ√≥mico</p>
                <p class="font-semibold capitalize">{{ detalle.sector_economico }}</p>
              </div>

              <div>
                <p class="text-xs text-gray-500 font-medium">Ubicaci√≥n</p>
                <p class="font-semibold">{{ detalle.ubicacion_negocio }}</p>
              </div>

              <div>
                <p class="text-xs text-gray-500 font-medium">Tiempo de funcionamiento</p>
                <p class="font-semibold">{{ detalle.tiempo_funcionamiento }}</p>
              </div>

              <div>
                <p class="text-xs text-gray-500 font-medium">Tipo de local</p>
                <p class="font-semibold capitalize">{{ detalle.tipo_local }}</p>
              </div>

              <div>
                <p class="text-xs text-gray-500 font-medium">N¬∞ trabajadores</p>
                <p class="font-semibold">{{ detalle.numero_trabajadores }}</p>
              </div>

            </div>
          </div>

          <!-- ================== EMPRENDEDOR =================== -->
          <div class="bg-gray-50 p-5 rounded-xl border shadow-sm">
            <h4 class="text-lg font-semibold text-gray-800 mb-3 flex items-center gap-2">
              <i class="bi bi-person-badge text-indigo-600"></i>
              Informaci√≥n del Emprendedor
            </h4>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">

              <div>
                <p class="text-xs text-gray-500 font-medium">Nombre completo</p>
                <p class="font-semibold">{{ detalle.nombre_completo }}</p>
              </div>

              <div>
                <p class="text-xs text-gray-500 font-medium">Correo electr√≥nico</p>
                <p class="font-semibold">{{ detalle.email }}</p>
              </div>

              <div>
                <p class="text-xs text-gray-500 font-medium">Nivel educativo</p>
                <p class="font-semibold capitalize">{{ detalle.nivel_educativo }}</p>
              </div>

              <div>
                <p class="text-xs text-gray-500 font-medium">Apoyo familiar</p>
                <p class="font-semibold">{{ detalle.apoyo_familiar }}</p>
              </div>

            </div>
          </div>

          <!-- =================== FINANZAS ==================== -->
          <div class="bg-gray-50 p-5 rounded-xl border shadow-sm">
            <h4 class="text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2">
              <i class="bi bi-cash-coin text-indigo-600"></i>
              Informaci√≥n Financiera
            </h4>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">

              <div class="bg-white p-4 rounded-xl border text-center shadow-sm">
                <p class="text-xs text-gray-500 font-medium uppercase">Ingresos mensuales</p>
                <p class="text-xl font-bold text-green-600">
                  {{ detalle.ingresos_mensuales | currency:'COP' }}
                </p>
              </div>

              <div class="bg-white p-4 rounded-xl border text-center shadow-sm">
                <p class="text-xs text-gray-500 font-medium uppercase">Gastos mensuales</p>
                <p class="text-xl font-bold text-red-600">
                  {{ detalle.gastos_mensuales | currency:'COP' }}
                </p>
              </div>

              <div class="bg-white p-4 rounded-xl border text-center shadow-sm">
                <p class="text-xs text-gray-500 font-medium uppercase">Utilidad neta</p>
                <p class="text-xl font-bold text-blue-600">
                  {{ detalle.utilidad_neta | currency:'COP' }}
                </p>
              </div>

            </div>
          </div>

          <!-- ================== OPERACI√ìN ==================== -->
          <div class="bg-gray-50 p-5 rounded-xl border shadow-sm">
            <h4 class="text-lg font-semibold text-gray-800 mb-3 flex items-center gap-2">
              <i class="bi bi-bag-check text-indigo-600"></i>
              Operaci√≥n del Negocio
            </h4>

            <p class="text-xs text-gray-500 font-medium">Productos / Servicios</p>
            <p class="font-semibold">{{ detalle.productos_servicios }}</p>

            <p class="text-xs text-gray-500 font-medium mt-3">Canales de venta</p>
            <p class="font-semibold">{{ detalle.canales_venta }}</p>

            <p class="text-xs text-gray-500 font-medium mt-3">Frecuencia de ventas</p>
            <p class="font-semibold capitalize">{{ detalle.frecuencia_ventas }}</p>

          </div>

        </div>
      </div>

      <!-- FOOTER -->
      <div class="px-6 py-4 bg-gray-50 border-t flex justify-end gap-3">

        <button (click)="denegar(detalle?.id_solicitud)"
          class="px-6 py-2.5 rounded-xl bg-red-500 text-white text-sm font-semibold hover:bg-red-600 shadow">
          Denegar
        </button>

        <button (click)="aprobar(detalle?.id_solicitud)"
          class="px-6 py-2.5 rounded-xl bg-emerald-500 text-white text-sm font-semibold hover:bg-emerald-600 shadow">
          Aprobar
        </button>

      </div>
    </div>

  </div>

</div>
<div class="flex justify-center items-center gap-3 mt-6" *ngIf="totalPages() > 1">

  <button
    (click)="prevPage()"
    [disabled]="page === 1"
    class="px-4 py-2 rounded-xl border bg-white text-gray-600 hover:bg-gray-50 disabled:opacity-40">
    <i class="bi bi-chevron-left"></i>
  </button>

  <span class="text-sm text-gray-700 font-medium">
    P√°gina {{ page }} de {{ totalPages() }}
  </span>

  <button
    (click)="nextPage()"
    [disabled]="page === totalPages()"
    class="px-4 py-2 rounded-xl border bg-white text-gray-600 hover:bg-gray-50 disabled:opacity-40">
    <i class="bi bi-chevron-right"></i>
  </button>

</div>
