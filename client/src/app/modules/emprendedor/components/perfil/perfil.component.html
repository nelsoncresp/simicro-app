<div class="min-h-screen  py-8 px-4 sm:px-6 lg:px-8">
  <div class="max-w-7xl mx-auto">
    <!-- Header -->
    <!-- <div class="mb-8">
      <h1 class="text-4xl font-bold text-gray-900 mb-2">Mi Perfil</h1>
      <p class="text-gray-600 text-lg">Información de tu perfil de usuario</p>
    </div> -->

    <!-- Vista: Detalles del Usuario (cuando tieneDetalleUsuario = true) -->
    <div *ngIf="tieneDetalleUsuario && detallesUsuario" class="space-y-10">

      <div *ngFor="let detalle of detallesUsuario" class="rounded-2xl shadow-lg overflow-hidden border border-cyan-200">

        <!-- Encabezado -->
        <div class="bg-gradient-to-r from-cyan-400 to-cyan-600 p-8 text-white flex items-center justify-between">
          <div>
            <h2 class="text-3xl font-semibold flex items-center gap-3">
              <i class="bi bi-person-lines-fill text-white text-4xl"></i>
              Información Personal
            </h2>
            <p class="text-sm opacity-90 mt-1">
              Datos registrados en el sistema
            </p>
          </div>
          <div class="flex-shrink-0">
            <div class="h-14 w-14 rounded-full bg-white/20 flex items-center justify-center">
              <i class="bi bi-shield-check text-white text-3xl"></i>
            </div>
          </div>
        </div>

        <!-- CONTENIDO -->
        <div class="bg-white p-8 space-y-10">

          <!-- Documento -->
          <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
            <div class="p-6 rounded-xl bg-gray-50 border border-gray-200 shadow-sm">
              <label class="text-xs font-semibold text-cyan-700 uppercase tracking-wide mb-1 block">
                Tipo de Documento
              </label>
              <p class="text-lg font-bold text-gray-800 flex items-center gap-2">
                <i class="bi bi-card-heading text-cyan-600"></i>
                {{ detalle.tipo_documento }}
              </p>
            </div>

            <div class="p-6 rounded-xl bg-gray-50 border border-gray-200 shadow-sm">
              <label class="text-xs font-semibold text-cyan-700 uppercase tracking-wide mb-1 block">
                Número de Documento
              </label>
              <p class="text-lg font-bold text-gray-800 flex items-center gap-2">
                <i class="bi bi-hash text-cyan-600"></i>
                {{ detalle.numero_documento }}
              </p>
            </div>
          </div>

          <!-- Fecha y género -->
          <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
            <div class="p-6 rounded-xl bg-gray-50 border border-gray-200 shadow-sm">
              <label class="text-xs font-semibold text-cyan-700 uppercase tracking-wide mb-1 block">
                Fecha de Nacimiento
              </label>
              <p class="text-lg font-bold text-gray-800 flex items-center gap-2">
                <i class="bi bi-calendar-date text-cyan-600"></i>
                {{ detalle.fecha_nacimiento | date:'dd/MM/yyyy' }}
              </p>
            </div>

            <div class="p-6 rounded-xl bg-gray-50 border border-gray-200 shadow-sm">
              <label class="text-xs font-semibold text-cyan-700 uppercase tracking-wide mb-1 block">
                Género
              </label>
              <p class="text-lg font-bold text-gray-800 flex items-center gap-2">
                <i class="bi bi-gender-ambiguous text-cyan-600"></i>
                {{ detalle.genero }}
              </p>
            </div>
          </div>

          <!-- Teléfono y estado civil -->
          <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
            <div class="p-6 rounded-xl bg-gray-50 border border-gray-200 shadow-sm">
              <label class="text-xs font-semibold text-cyan-700 uppercase tracking-wide mb-1 block">
                Teléfono
              </label>
              <p class="text-lg font-bold text-gray-800 flex items-center gap-2">
                <i class="bi bi-telephone text-cyan-600"></i>
                {{ detalle.telefono }}
              </p>
            </div>

            <div class="p-6 rounded-xl bg-gray-50 border border-gray-200 shadow-sm">
              <label class="text-xs font-semibold text-cyan-700 uppercase tracking-wide mb-1 block">
                Estado Civil
              </label>
              <p class="text-lg font-bold text-gray-800 flex items-center gap-2">
                <i class="bi bi-people text-cyan-600"></i>
                {{ detalle.estado_civil }}
              </p>
            </div>
          </div>

          <!-- Dirección -->
          <div class="p-6 rounded-xl bg-gray-50 border border-gray-200 shadow-sm">
            <label class="text-xs font-semibold text-cyan-700 uppercase tracking-wide mb-1 block">
              Dirección
            </label>
            <p class="text-lg font-bold text-gray-800 flex items-center gap-2">
              <i class="bi bi-geo-alt text-cyan-600"></i>
              {{ detalle.direccion }}
            </p>
          </div>

          <!-- Ubicación -->
          <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
            <div class="p-6 rounded-xl bg-gray-50 border border-gray-200 shadow-sm">
              <label class="text-xs font-semibold text-cyan-700 uppercase tracking-wide mb-1 block">
                Departamento
              </label>
              <p class="text-lg font-bold text-gray-800 flex items-center gap-2">
                <i class="bi bi-pin-map text-cyan-600"></i>
                {{ detalle.departamento }}
              </p>
            </div>

            <div class="p-6 rounded-xl bg-gray-50 border border-gray-200 shadow-sm">
              <label class="text-xs font-semibold text-cyan-700 uppercase tracking-wide mb-1 block">
                Municipio
              </label>
              <p class="text-lg font-bold text-gray-800 flex items-center gap-2">
                <i class="bi bi-building text-cyan-600"></i>
                {{ detalle.municipio }}
              </p>
            </div>
          </div>

        </div>
      </div>
    </div>


    <!-- Vista: Formulario (cuando tieneDetalleUsuario = false) -->
    <div *ngIf="!tieneDetalleUsuario" class="rounded-2xl shadow-lg overflow-hidden border border-cyan-200 bg-white">

      <!-- ENCABEZADO -->
      <div class="bg-gradient-to-r from-cyan-400 to-cyan-600 p-8 text-white">
        <h2 class="text-3xl font-semibold flex items-center gap-3">
          <i class="bi bi-person-check-fill text-white text-4xl"></i>
          Información Personal
        </h2>
        <p class="text-sm opacity-90 mt-1">Completa los datos de tu perfil de usuario</p>
      </div>

      <!-- FORMULARIO -->
      <form [formGroup]="perfilForm" (ngSubmit)="saveProfile()" class="p-8 space-y-10">

        <!-- Tipo Documento / Número Documento -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">

          <!-- Tipo Documento -->
          <div>
            <label for="tipo_documento" class="text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2">
              <i class="bi bi-card-heading text-cyan-600"></i>
              Tipo de Documento <span class="text-red-500">*</span>
            </label>

            <select id="tipo_documento" formControlName="tipo_documento" [class]="isFieldInvalid('tipo_documento')
              ? 'border-red-300 focus:ring-red-500 focus:border-red-500'
              : 'border-gray-300 focus:ring-cyan-500 focus:border-cyan-500'"
              class="w-full px-4 py-3 border rounded-lg shadow-sm focus:outline-none focus:ring-2 bg-white transition-all">
              <option value="">Seleccione un tipo de documento</option>
              <option *ngFor="let tipo of tiposDocumento" [value]="tipo.descAbrv">
                {{ tipo.descripcion }}
              </option>
            </select>

            <p *ngIf="isFieldInvalid('tipo_documento')" class="mt-1 text-sm text-red-600">
              {{ getFieldError('tipo_documento') }}
            </p>
          </div>

          <!-- Número Documento -->
          <div>
            <label for="numero_documento" class="text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2">
              <i class="bi bi-hash text-cyan-600"></i>
              Número de Documento <span class="text-red-500">*</span>
            </label>

            <input id="numero_documento" type="text" formControlName="numero_documento" [class]="isFieldInvalid('numero_documento')
              ? 'border-red-300 focus:ring-red-500 focus:border-red-500'
              : 'border-gray-300 focus:ring-cyan-500 focus:border-cyan-500'"
              class="w-full px-4 py-3 border rounded-lg shadow-sm focus:outline-none focus:ring-2 transition-all"
              placeholder="Ingrese solo números" inputmode="numeric" (input)="limpiarNumeros('numero_documento')" />

            <p *ngIf="isFieldInvalid('numero_documento')" class="mt-1 text-sm text-red-600">
              {{ getFieldError('numero_documento') }}
            </p>
          </div>

        </div>

        <!-- Fecha nacimiento / Género -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">

          <!-- Fecha -->
          <div>
            <label for="fecha_nacimiento" class="text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2">
              <i class="bi bi-calendar-date text-cyan-600"></i>
              Fecha de Nacimiento <span class="text-red-500">*</span>
            </label>

            <input id="fecha_nacimiento" type="date" formControlName="fecha_nacimiento" [class]="isFieldInvalid('fecha_nacimiento')
              ? 'border-red-300 focus:ring-red-500 focus:border-red-500'
              : 'border-gray-300 focus:ring-cyan-500 focus:border-cyan-500'"
              class="w-full px-4 py-3 border rounded-lg shadow-sm focus:outline-none focus:ring-2 transition-all" />

            <p *ngIf="isFieldInvalid('fecha_nacimiento')" class="mt-1 text-sm text-red-600">
              {{ getFieldError('fecha_nacimiento') }}
            </p>
          </div>

          <!-- Género -->
          <div>
            <label for="genero" class="text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2">
              <i class="bi bi-gender-ambiguous text-cyan-600"></i>
              Género <span class="text-red-500">*</span>
            </label>

            <select id="genero" formControlName="genero" [class]="isFieldInvalid('genero')
              ? 'border-red-300 focus:ring-red-500 focus:border-red-500'
              : 'border-gray-300 focus:ring-cyan-500 focus:border-cyan-500'"
              class="w-full px-4 py-3 border rounded-lg shadow-sm focus:outline-none focus:ring-2 bg-white transition-all">
              <option value="">Seleccione su género</option>
              <option *ngFor="let genero of generosOptions" [value]="genero">
                {{ genero }}
              </option>
            </select>

            <p *ngIf="isFieldInvalid('genero')" class="mt-1 text-sm text-red-600">
              {{ getFieldError('genero') }}
            </p>
          </div>

        </div>

        <!-- Teléfono / Estado Civil -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">

          <!-- Teléfono -->
          <div>
            <label for="telefono" class="text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2">
              <i class="bi bi-telephone-fill text-cyan-600"></i>
              Teléfono <span class="text-red-500">*</span>
            </label>

            <input id="telefono" type="tel" formControlName="telefono" [class]="isFieldInvalid('telefono')
              ? 'border-red-300 focus:ring-red-500 focus:border-red-500'
              : 'border-gray-300 focus:ring-cyan-500 focus:border-cyan-500'"
              class="w-full px-4 py-3 border rounded-lg shadow-sm focus:outline-none focus:ring-2 transition-all"
              placeholder="Ingrese su número de teléfono" inputmode="numeric"
              (input)="limpiarNumeros('numero_documento')" />

            <p *ngIf="isFieldInvalid('telefono')" class="mt-1 text-sm text-red-600">
              {{ getFieldError('telefono') }}
            </p>
          </div>

          <!-- Estado civil -->
          <div>
            <label for="estado_civil" class="text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2">
              <i class="bi bi-people-fill text-cyan-600"></i>
              Estado Civil <span class="text-red-500">*</span>
            </label>

            <select id="estado_civil" formControlName="estado_civil" [class]="isFieldInvalid('estado_civil')
              ? 'border-red-300 focus:ring-red-500 focus:border-red-500'
              : 'border-gray-300 focus:ring-cyan-500 focus:border-cyan-500'"
              class="w-full px-4 py-3 border rounded-lg shadow-sm focus:outline-none focus:ring-2 bg-white transition-all">
              <option value="">Seleccione su estado civil</option>
              <option *ngFor="let estado of estadosCiviles" [value]="estado.descAbrv">
                {{ estado.descripcion }}
              </option>
            </select>

            <p *ngIf="isFieldInvalid('estado_civil')" class="mt-1 text-sm text-red-600">
              {{ getFieldError('estado_civil') }}
            </p>
          </div>

        </div>

        <!-- Dirección -->
        <div>
          <label for="direccion" class="text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2">
            <i class="bi bi-geo-alt-fill text-cyan-600"></i>
            Dirección <span class="text-red-500">*</span>
          </label>

          <input id="direccion" type="text" formControlName="direccion" [class]="isFieldInvalid('direccion')
            ? 'border-red-300 focus:ring-red-500 focus:border-red-500'
            : 'border-gray-300 focus:ring-cyan-500 focus:border-cyan-500'"
            class="w-full px-4 py-3 border rounded-lg shadow-sm focus:outline-none focus:ring-2 transition-all"
            placeholder="Ej: Calle 5 #10-20, Apartamento 305" />

          <p *ngIf="isFieldInvalid('direccion')" class="mt-1 text-sm text-red-600">
            {{ getFieldError('direccion') }}
          </p>
        </div>

        <!-- Departamento / Municipio -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">

          <div>
            <label for="departamento" class="text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2">
              <i class="bi bi-pin-map-fill text-cyan-600"></i>
              Departamento <span class="text-red-500">*</span>
            </label>

            <input id="departamento" type="text" formControlName="departamento" [class]="isFieldInvalid('departamento')
              ? 'border-red-300 focus:ring-red-500 focus:border-red-500'
              : 'border-gray-300 focus:ring-cyan-500 focus:border-cyan-500'"
              class="w-full px-4 py-3 border rounded-lg shadow-sm focus:outline-none focus:ring-2 transition-all"
              placeholder="Digite su departamento" />

            <p *ngIf="isFieldInvalid('departamento')" class="mt-1 text-sm text-red-600">
              {{ getFieldError('departamento') }}
            </p>
          </div>

          <div>
            <label for="municipio" class="text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2">
              <i class="bi bi-building-fill text-cyan-600"></i>
              Municipio <span class="text-red-500">*</span>
            </label>

            <input id="municipio" type="text" formControlName="municipio" [class]="isFieldInvalid('municipio')
              ? 'border-red-300 focus:ring-red-500 focus:border-red-500'
              : 'border-gray-300 focus:ring-cyan-500 focus:border-cyan-500'"
              class="w-full px-4 py-3 border rounded-lg shadow-sm focus:outline-none focus:ring-2 transition-all"
              placeholder="Digite su municipio" />

            <p *ngIf="isFieldInvalid('municipio')" class="mt-1 text-sm text-red-600">
              {{ getFieldError('municipio') }}
            </p>
          </div>

        </div>

        <!-- BOTONES -->
        <div class="flex justify-end gap-4 pt-8 border-t border-gray-200">

          <button type="button" (click)="resetForm()" [disabled]="!perfilForm.dirty"
            [class]="!perfilForm.dirty ? 'opacity-50 cursor-not-allowed' : 'hover:bg-gray-100'"
            class="px-8 py-3 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg shadow-sm transition-all flex items-center gap-2">
            <i class="bi bi-x-circle"></i> Cancelar
          </button>

          <button type="submit" [disabled]="perfilForm.invalid"
            [class]="perfilForm.invalid ? 'opacity-50 cursor-not-allowed' : 'hover:shadow-lg'" class="px-8 py-3 text-sm font-medium text-white rounded-lg shadow-md transition-all
               bg-gradient-to-r from-cyan-500 to-cyan-600 flex items-center gap-2">
            <i class="bi bi-save-fill text-white"></i>
            Guardar Cambios
          </button>

        </div>

      </form>
    </div>

  </div>
</div>